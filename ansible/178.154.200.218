# конфиг файл для для балансировщика
#/etc/nginx/sites-available/example.com (example.com - адрес сайта или его ip)
upstream mywebapp1 {
server 178.154.201.218;
server 178.154.205.208;
}
server {
listen 80;
listen 443 ssl;
server_name 178.154.200.218;
access_log /var/log/nginx/example.com.access.log main;
ssl on;
# Пропустите директиву ssl_trusted_certificate, если вы используете самоподписанный сертификат.
ssl_certificate         /etc/nginx/ssl/178.154.200.218/server.crt;
ssl_certificate_key     /etc/nginx/ssl/178.154.200.218/server.key;
#ssl_trusted_certificate /etc/nginx/ssl/example.com/ca-certs.pem;
ssl_session_cache shared:SSL:20m;
ssl_session_timeout 10m;
ssl_prefer_server_ciphers       on;
ssl_protocols                   TLSv1 TLSv1.1 TLSv1.2;
ssl_ciphers                     ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:ECDH+3DES:DH+3DES:RSA+AESGCM:RSA+AES:RSA+3DES:!aNULL:!MD5:!DSS;
add_header Strict-Transport-Security "max-age=31536000";
location / {
proxy_pass http://mywebapp1; # mywebapp1 - наменование нашего upstream сервиса или кластера или группы серверов севреров 
proxy_set_header Host $host;
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto $scheme;
}
}



